(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{220:function(t,e,s){"use strict";s.r(e);var i=s(7),r=(s(10),s(9),s(36)),n=s(2),a=s(246);function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(s,!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var u={mixins:[r.b],computed:o({breadcrumbs:function(){if(this.$data.tour)return a.a.generate("tickets.list",this.$data.tour)}},Object(n.b)([{name:"list.fetch",process:"tickets@list.fetch"}])),data:function(){return{items:[],pagination:null,tour:null}},created:function(){this.$listenCycle("tickets@list.fetch",this.list)},beforeRouteEnter:function(t,e,s){return s((function(e){return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(e.$filters("tickets").restoreFromUrl(t.name));case 2:e.lock(e.list(),e.view());case 3:case"end":return s.stop()}}))}))},methods:o({onClickCreate:function(){this.$router.push({name:"tickets.create"})},fill:function(t){this.items=t.items,this.pagination=t.pagination},close:function(){this.$router.push({name:"tickets.list"})},onChangePage:function(t){this.$filters("tickets").data.page=t,this.list()}},Object(i.mapActions)("tickets",{list:function(t){var e;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return this.$filters("tickets").data.tour_id=this.$routeParam("tourId"),s.next=3,regeneratorRuntime.awrap(t("list"));case 3:e=s.sent,this.fill(e);case 5:case"end":return s.stop()}}),null,this)}}),{},Object(i.mapActions)("tours",{view:function(t){var e,s,i,r=arguments;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=r.length>1&&void 0!==r[1]?r[1]:null,n.next=3,regeneratorRuntime.awrap(t("view",{tourId:e||this.$routeParam("tourId")}));case 3:s=n.sent,i=s.view,this.$data.tour=i;case 6:case"end":return n.stop()}}),null,this)}}))},d=s(1),f=Object(d.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{locked:t.locked,breadcrumbs:t.breadcrumbs},on:{"close-sidebar":t.close},scopedSlots:t._u([{key:"actions",fn:function(){return[s("div",{staticClass:"o-layout__header-actions"},[t.$can("tickets.create")?s("div",{staticClass:"o-layout__header-group"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.onClickCreate}},[t._v(t._s(t.$t("Create ticket"))+"\n                ")])],1):t._e()])]},proxy:!0},{key:"content",fn:function(e){var i=e.locked;return[s("v-scroll",{staticClass:"col-xl-6",attrs:{locked:i}},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"pt-20"},[s("v-search-panel",{on:{search:t.list},model:{value:t.$filters("tickets").data.term,callback:function(e){t.$set(t.$filters("tickets").data,"term",e)},expression:"$filters('tickets').data.term"}})],1)]),t._v(" "),s("v-content-list",{staticClass:"col-inner",attrs:{items:t.items,pagination:t.pagination},on:{"change-page":t.onChangePage},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item;return[s("v-list-item",{key:i.id,attrs:{data:i,route:{name:"tickets.view",params:{ticketId:i.id}},"title-by":"name","description-by":"bookeo_id"},scopedSlots:t._u([{key:"aside",fn:function(){return[s("div",{staticClass:"c-list__aside-item"},[s("div",{staticClass:"c-list__aside-text"},[t._v(t._s(t.$t("Options"))+":")])]),t._v(" "),s("div",{staticClass:"c-list__aside-item"},[s("el-tag",{attrs:{size:"small"}},[t._v(t._s(i.ticket_opions_count))])],1)]},proxy:!0}],null,!0)})]}}],null,!0)})],1),t._v(" "),s("div",{staticClass:"col-xl-6 d-none d-xl-flex u-border-left"},[s("div",{staticClass:"c-aside-icon"},[s("div",{staticClass:"c-aside-icon__inner"},[s("i",{staticClass:"icon fal fa-landmark"}),t._v(" "),s("div",{staticClass:"title"},[t._v(t._s(t.$t("Tickets")))])])])])]}}])})}),[],!1,null,null,null);e.default=f.exports},239:function(t,e,s){"use strict";var i=s(23),r=s(6);i.b.register("tours.list",(function(t){t.push(Object(r.$t)("Tours"),"tours.list")})),i.b.register("tours.view",(function(t,e){t.parent("tours.list"),t.push(e.name,{name:"tours.view",params:{tourId:e.id}})})),e.a=i.b},246:function(t,e,s){"use strict";var i=s(23),r=(s(239),s(6));i.b.register("tickets.list",(function(t){t.push(Object(r.$t)("Tickets"),"tickets.list")})),i.b.register("tickets.list",(function(t,e){t.parent("tours.view",e),t.push(Object(r.$t)("Tickets"),"tickets.list")})),e.a=i.b}}]);