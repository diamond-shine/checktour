(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{203:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(10),r(9),r(36)),a=r(2),i=r(23),s=r(6);i.b.register("forecasting.list",(function(t){t.push(Object(s.$t)("Forecasting"),"forecasting.list")}));var c=i.b,l=r(240);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={mixins:[o.b],components:{BookingsList:l.a},computed:f({breadcrumbs:c.make("forecasting.list")},Object(a.b)([{name:"list.fetch",process:"bookings@list.fetch"}])),data:function(){return{items:[],pagination:null}},created:function(){this.$listenCycle("bookings@list.fetch",this.list)},beforeRouteEnter:function(t,e,r){return r((function(e){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.$filters("bookings-forecast").restoreFromUrl(t.name));case 2:e.lock(e.list());case 3:case"end":return r.stop()}}))}))},methods:f({clientName:function(t){return"".concat(t.first_name," ").concat(t.last_name)},fill:function(t){this.items=t.items,this.pagination=t.pagination},close:function(){this.$router.push({name:"forecasting.list"})},onChangePage:function(t){this.$filters("bookings-forecast").data.page=t,this.list()}},Object(n.mapActions)("bookings",{list:function(t){var e;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t("listForecast"));case 2:e=r.sent,this.fill(e);case 4:case"end":return r.stop()}}),null,this)}}))},p=r(1),b=Object(p.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{locked:t.locked,breadcrumbs:t.breadcrumbs},on:{"close-sidebar":t.close},scopedSlots:t._u([{key:"content",fn:function(e){var n=e.locked;return[r("v-scroll",{staticClass:"col-xl-6",attrs:{locked:n}},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"pt-20"},[r("v-multi-search-panel",{attrs:{fetchUrl:"bookings/tours-autocomplete",placeholder:t.$t("Select tour"),allowClearing:!0},on:{search:t.list},model:{value:t.$filters("bookings-forecast").data,callback:function(e){t.$set(t.$filters("bookings-forecast"),"data",e)},expression:"$filters('bookings-forecast').data"}})],1)]),t._v(" "),r("bookings-list",{attrs:{items:t.items,pagination:t.pagination,"change-page":t.onChangePage,"view-page-route":"forecasting.view"}})],1),t._v(" "),r("div",{staticClass:"col-xl-6 d-none d-xl-flex u-border-left"},[r("div",{staticClass:"c-aside-icon"},[r("div",{staticClass:"c-aside-icon__inner"},[r("i",{staticClass:"icon far fa-file-medical-alt"}),t._v(" "),r("div",{staticClass:"title"},[t._v(t._s(t.$t("Forecasting")))])])])])]}}])})}),[],!1,null,null,null);e.default=b.exports},204:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(10),r(9),r(36)),a=r(2),i=r(23),s=r(6);i.b.register("waiting-room.list",(function(t){t.push(Object(s.$t)("Waiting room"),"waiting-room.list")}));var c=i.b,l=r(240);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={mixins:[o.b],components:{BookingsList:l.a},computed:f({breadcrumbs:c.make("waiting-room.list")},Object(a.b)([{name:"list.fetch",process:"bookings@listWaitingRoom.fetch"}])),data:function(){return{items:[],pagination:null}},created:function(){this.$listenCycle("bookings@listWaitingRoom.fetch",this.list)},beforeRouteEnter:function(t,e,r){return r((function(e){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.$filters("list-waiting-room").restoreFromUrl(t.name));case 2:e.lock(e.list());case 3:case"end":return r.stop()}}))}))},methods:f({clientName:function(t){return"".concat(t.first_name," ").concat(t.last_name)},onClickCreate:function(){this.$router.push({name:"waiting-room.create"})},fill:function(t){this.items=t.items,this.pagination=t.pagination},close:function(){this.$router.push({name:"waiting-room.list"})},onChangePage:function(t){this.$filters("bookings-waiting-room").data.page=t,this.list()}},Object(n.mapActions)("bookings",{list:function(t){var e;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t("listWaitingRoom"));case 2:e=r.sent,this.fill(e);case 4:case"end":return r.stop()}}),null,this)}}))},p=r(1),b=Object(p.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{locked:t.locked,breadcrumbs:t.breadcrumbs},on:{"close-sidebar":t.close},scopedSlots:t._u([{key:"actions",fn:function(){return[r("div",{staticClass:"o-layout__header-actions"},[t.$can("bookings.create")?r("div",{staticClass:"o-layout__header-group"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.onClickCreate}},[t._v(t._s(t.$t("Create booking"))+"\n                ")])],1):t._e()])]},proxy:!0},{key:"content",fn:function(e){var n=e.locked;return[r("v-scroll",{staticClass:"col-xl-6",attrs:{locked:n}},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"pt-20"},[r("v-multi-search-panel",{attrs:{fetchUrl:"bookings/tours-autocomplete",placeholder:t.$t("Select tour"),allowClearing:!0},on:{search:t.list},model:{value:t.$filters("bookings-waiting-room").data,callback:function(e){t.$set(t.$filters("bookings-waiting-room"),"data",e)},expression:"$filters('bookings-waiting-room').data"}})],1)]),t._v(" "),r("bookings-list",{attrs:{items:t.items,pagination:t.pagination,"change-page":t.onChangePage,"view-page-route":"waiting-room.view"}})],1),t._v(" "),r("div",{staticClass:"col-xl-6 d-none d-xl-flex u-border-left"},[r("div",{staticClass:"c-aside-icon"},[r("div",{staticClass:"c-aside-icon__inner"},[r("i",{staticClass:"icon far fa-hourglass"}),t._v(" "),r("div",{staticClass:"title"},[t._v(t._s(t.$t("Waiting room")))])])])])]}}])})}),[],!1,null,null,null);e.default=b.exports},205:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(10),r(9),r(36)),a=r(2),i=r(23),s=r(6);i.b.register("processed.list",(function(t){t.push(Object(s.$t)("Processed"),"processed.list")}));var c=i.b,l=r(240);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={mixins:[o.b],components:{BookingsList:l.a},computed:f({breadcrumbs:c.make("processed.list")},Object(a.b)([{name:"list.fetch",process:"bookings@list.fetch"}])),data:function(){return{items:[],pagination:null}},created:function(){this.$listenCycle("bookings@list.fetch",this.list)},beforeRouteEnter:function(t,e,r){return r((function(e){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.$filters("list-waiting-room").restoreFromUrl(t.name));case 2:e.lock(e.list());case 3:case"end":return r.stop()}}))}))},methods:f({clientName:function(t){return"".concat(t.first_name," ").concat(t.last_name)},onClickCreate:function(){this.$router.push({name:"bookings.create"})},fill:function(t){this.items=t.items,this.pagination=t.pagination},close:function(){this.$router.push({name:"processed.list"})},onChangePage:function(t){this.$filters("list-waiting-room").data.page=t,this.list()}},Object(n.mapActions)("bookings",{list:function(t){var e;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t("listProcessed"));case 2:e=r.sent,this.fill(e);case 4:case"end":return r.stop()}}),null,this)}}))},p=r(1),b=Object(p.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{locked:t.locked,breadcrumbs:t.breadcrumbs},on:{"close-sidebar":t.close},scopedSlots:t._u([{key:"content",fn:function(e){var n=e.locked;return[r("v-scroll",{staticClass:"col-xl-6",attrs:{locked:n}},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"pt-20"},[r("v-multi-search-panel",{attrs:{fetchUrl:"bookings/tours-autocomplete",placeholder:t.$t("Select tour"),allowClearing:!0},on:{search:t.list},model:{value:t.$filters("processed").data,callback:function(e){t.$set(t.$filters("processed"),"data",e)},expression:"$filters('processed').data"}})],1)]),t._v(" "),r("bookings-list",{attrs:{items:t.items,pagination:t.pagination,"change-page":t.onChangePage,"view-page-route":"processed.view"}})],1),t._v(" "),r("div",{staticClass:"col-xl-6 d-none d-xl-flex u-border-left"},[r("div",{staticClass:"c-aside-icon"},[r("div",{staticClass:"c-aside-icon__inner"},[r("i",{staticClass:"icon far fa-clipboard-check"}),t._v(" "),r("div",{staticClass:"title"},[t._v(t._s(t.$t("Processed")))])])])])]}}])})}),[],!1,null,null,null);e.default=b.exports},206:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(10),r(9),r(36)),a=r(2),i=r(23),s=r(6);i.b.register("rostered.list",(function(t){t.push(Object(s.$t)("Rostered"),"rostered.list")}));var c=i.b,l=r(240);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={mixins:[o.b],components:{BookingsList:l.a},computed:f({breadcrumbs:c.make("rostered.list")},Object(a.b)([{name:"list.fetch",process:"bookings@list.fetch"}])),data:function(){return{items:[],pagination:null}},created:function(){this.$listenCycle("bookings@list.fetch",this.list)},beforeRouteEnter:function(t,e,r){return r((function(e){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.$filters("bookings-rostered").restoreFromUrl(t.name));case 2:e.lock(e.list());case 3:case"end":return r.stop()}}))}))},methods:f({clientName:function(t){return"".concat(t.first_name," ").concat(t.last_name)},onClickCreate:function(){this.$router.push({name:"bookings.create"})},fill:function(t){this.items=t.items,this.pagination=t.pagination},close:function(){this.$router.push({name:"rostered.list"})},onChangePage:function(t){this.$filters("bookings-rostered").data.page=t,this.list()}},Object(n.mapActions)("bookings",{list:function(t){var e;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t("listRostered"));case 2:e=r.sent,this.fill(e);case 4:case"end":return r.stop()}}),null,this)}}))},p=r(1),b=Object(p.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{locked:t.locked,breadcrumbs:t.breadcrumbs},on:{"close-sidebar":t.close},scopedSlots:t._u([{key:"content",fn:function(e){var n=e.locked;return[r("v-scroll",{staticClass:"col-xl-6",attrs:{locked:n}},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"pt-20"},[r("v-multi-search-panel",{attrs:{fetchUrl:"bookings/tours-autocomplete",placeholder:t.$t("Select tour"),allowClearing:!0},on:{search:t.list},model:{value:t.$filters("bookings-rostered").data,callback:function(e){t.$set(t.$filters("bookings-rostered"),"data",e)},expression:"$filters('bookings-rostered').data"}})],1)]),t._v(" "),r("bookings-list",{attrs:{items:t.items,pagination:t.pagination,"change-page":t.onChangePage,"view-page-route":"rostered.view"}})],1),t._v(" "),r("div",{staticClass:"col-xl-6 d-none d-xl-flex u-border-left"},[r("div",{staticClass:"c-aside-icon"},[r("div",{staticClass:"c-aside-icon__inner"},[r("i",{staticClass:"icon fas fa-user-tie"}),t._v(" "),r("div",{staticClass:"title"},[t._v(t._s(t.$t("Rostered")))])])])])]}}])})}),[],!1,null,null,null);e.default=b.exports},208:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(243),r(10),r(36));function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s={components:{ModelForm:r(251).a},mixins:[o.b],data:function(){return{formData:null,tours:[]}},beforeRouteEnter:function(t,e,r){return r((function(t){return t.lock(t.create())}))},computed:{backRoute:function(){return{name:"waiting-room.list"}}},methods:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(r,!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({onClickCancel:function(){this.$refs.form.restore(),this.$router.push(this.backRoute)}},Object(n.mapActions)("bookings",{create:function(t){var e;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t("create"));case 2:e=r.sent,this.tours=e.tours,this.$data.formData=e.form;case 5:case"end":return r.stop()}}),null,this)},store:function(t,e){var r,n;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(t("store",{form:e}));case 2:return r=o.sent,n=r.form,o.next=6,regeneratorRuntime.awrap(e.setData(n));case 6:this.$router.push(this.backRoute),this.$ee.emit("bookings@listWaitingRoom.fetch");case 8:case"end":return o.stop()}}),null,this)}}))},c=r(1),l=Object(c.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-sidebar-layout",{attrs:{locked:t.locked},scopedSlots:t._u([{key:"header",fn:function(){return[r("v-sidebar-layout-header",{attrs:{title:t.$t("New booking"),"back-route":t.backRoute}})]},proxy:!0},{key:"body",fn:function(){return[r("v-form",{ref:"form",attrs:{data:t.formData,name:"tickets"},on:{submit:t.store},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.form,o=e.submit;return[r("model-form",{attrs:{form:n,tours:t.tours,"create-mode":!0},on:{submit:o}},[r("el-button",{attrs:{type:"success","native-type":"submit"}},[t._v(t._s(t.$t("Create"))+"\n                ")]),t._v(" "),r("el-button",{on:{click:t.onClickCancel}},[t._v(t._s(t.$t("Cancel"))+"\n                ")])],1)]}}])})]},proxy:!0}])})}),[],!1,null,null,null);e.default=l.exports},210:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(10),r(36)),a=r(251),i=r(2);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(r,!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u={mixins:[o.b],components:{ModelForm:a.a},data:function(){return{formData:null}},beforeRouteEnter:function(t,e,r){return r((function(t){return t.lock(t.edit())}))},beforeRouteUpdate:function(t,e,r){t.params.ticketId!==e.params.ticketId&&this.lock(this.edit()),r()},computed:c({backRoute:function(){return{name:"bookings.view",params:{ticketId:this.$routeParam("ticketId")}}}},Object(i.b)([{name:"bookings.update",process:"bookings@edit.update"}])),methods:c({onClickCancel:function(){this.$refs.form.restore(),this.$router.push(this.backRoute)}},Object(n.mapActions)("bookings",{edit:function(t){var e;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t("edit",{bookingId:this.$routeParam("bookingId")}));case 2:e=r.sent,this.$data.formData=e.form;case 4:case"end":return r.stop()}}),null,this)},update:function(t,e){var r,n;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(t("update",{bookingId:this.$routeParam("bookingId"),form:e}));case 2:return r=o.sent,n=r.view,o.next=6,regeneratorRuntime.awrap(e.setData(n));case 6:this.$ee.emit("bookings@list.fetch"),this.$router.push(this.backRoute);case 8:case"end":return o.stop()}}),null,this)}}))},f=r(1),m=Object(f.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-sidebar-layout",{attrs:{locked:t.locked},scopedSlots:t._u([{key:"header",fn:function(){return[r("v-sidebar-layout-header",{attrs:{title:t.$t("Edit booking"),"back-route":t.backRoute}})]},proxy:!0},{key:"body",fn:function(){return[r("v-form",{ref:"form",attrs:{data:t.formData,name:"tickets"},on:{submit:t.update},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.form,o=e.submit;return[r("model-form",{attrs:{form:n},on:{submit:o}},[r("v-divider"),t._v(" "),r("el-button",{attrs:{type:"success","native-type":"submit"}},[t._v(t._s(t.$t("Save"))+"\n                ")]),t._v(" "),r("el-button",{on:{click:t.onClickCancel}},[t._v(t._s(t.$t("Cancel"))+"\n                ")])],1)]}}])})]},proxy:!0}])})}),[],!1,null,null,null);e.default=m.exports},240:function(t,e,r){"use strict";var n=r(36),o={mixins:[n.a,n.c],props:{items:{required:!0,type:Array},changePage:{type:Function},pagination:{required:!0,type:Object},viewPageRoute:{required:!0,type:String}},methods:{clientName:function(t){return"".concat(t.first_name," ").concat(t.last_name)}}},a=r(1),i=Object(a.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-content-list",{staticClass:"col-inner",attrs:{items:t.items,pagination:t.pagination},on:{"change-page":t.changePage},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[r("v-list-item",{key:n.id,attrs:{data:n,route:{name:t.viewPageRoute,params:{bookingId:n.id}},"title-by":t.clientName,"description-by":"tour.name"},scopedSlots:t._u([{key:"aside",fn:function(){return[r("div",{staticClass:"c-list__aside-item"},[r("div",{staticClass:"pt-10"},[t.isGuide?r("el-tag",{attrs:{type:t.statusColor(n),size:"small"}},[t._v(t._s(n.tickets_count)+" "+t._s(t.$t("tickets"))+"\n                        ")]):r("el-tag",{attrs:{type:t.statusColor(n),size:"small"}},[t._v(t._s(n.total_price)+" "+t._s(n.currency)+" | "+t._s(n.tickets_count)+" "+t._s(t.$t("tickets"))+"\n                        ")])],1),t._v(" "),r("div",{staticClass:"pt-10 u-text-right"},[t._v(t._s(n.start_at))])])]},proxy:!0}],null,!0)})]}}])})}),[],!1,null,null,null);e.a=i.exports},243:function(t,e,r){"use strict";var n=r(23),o=r(6);n.b.register("bookings.list",(function(t){t.push(Object(o.$t)("All bookings"),"bookings.list")})),e.a=n.b},251:function(t,e,r){"use strict";r(16);var n=r(5),o=(r(2),{mixins:[r(36).a],props:{form:{type:Object,required:!0},disabled:{type:Boolean,default:!1},createMode:{type:Boolean,default:!1}},data:function(){return{lock:!0,tickets:[],tours:[],options:[],initialTicketsList:[]}},computed:{iconClass:function(){return this.lock?"fal fa-lock-alt":"fal fa-unlock-alt"}},methods:{getMaxQuantity:function(t){return this.$can("bookings.create")?1/0:this.initialTicketsList.find((function(e){return e.ticket_id==t.ticket_id})).quantity},onChangeTour:function(){this.fetchOptions(),this.fetchTickets()},fetchTours:function(){var t,e;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$taskManager.run("autocomplete@tours.fetch",n.a.get("bookings/tours-autocomplete")));case 2:t=r.sent,e=t.data.data,this.tours=e.items;case 5:case"end":return r.stop()}}),null,this)},fetchOptions:function(){var t,e;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$taskManager.run("autocomplete@options.fetch",n.a.get("bookings/options-autocomplete/".concat(this.form.data.tour_id))));case 2:t=r.sent,e=t.data.data,this.options=e.items;case 5:case"end":return r.stop()}}),null,this)},fetchTickets:function(){var t,e,r=this;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.$taskManager.run("autocomplete@tickets.fetch",n.a.get("bookings/tickets-autocomplete/".concat(this.form.data.tour_id))));case 2:t=o.sent,e=t.data.data,this.form.data.tickets_list=e.items.map((function(t){var e=r.form.data.booking_tickets.find((function(e){return e.ticket_id==t.id}));return{ticket_id:t.id,name:t.name,quantity:e?e.quantity:0,price:parseFloat(t.price),is_active:t.is_active}})),this.initialTicketsList=this.form.data.tickets_list.map((function(t){return Object.assign({},t)})),this.tickets=e.items;case 7:case"end":return o.stop()}}),null,this)},onSubmit:function(){this.$emit("submit",this.$props.form)},toggle:function(){this.$data.lock=!this.$data.lock}},beforeMount:function(){var t=this;this.fetchTours(),this.fetchOptions(),this.fetchTickets(),this.form.data.options_list=[],this.form.data.ticket_options.forEach((function(e){t.form.data.options_list.includes(e.tour_option_id)||t.form.data.options_list.push(e.tour_option_id)}))}}),a=r(1),i=Object(a.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{attrs:{disabled:t.disabled,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("el-form-item",{attrs:{label:t.$t("Booking number"),error:t.form.formatErrors("booking_number"),required:""}},[r("el-input",{attrs:{disabled:!0},model:{value:t.form.data.booking_number,callback:function(e){t.$set(t.form.data,"booking_number",e)},expression:"form.data.booking_number"}})],1),t._v(" "),t.createMode?[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:14}},[r("el-form-item",{attrs:{label:t.$t("Tour"),error:t.form.formatErrors("tour_id"),required:""}},[r("el-select",{attrs:{placeholder:t.$t("Tour")},on:{change:t.onChangeTour},model:{value:t.form.data.tour_id,callback:function(e){t.$set(t.form.data,"tour_id",e)},expression:"form.data.tour_id"}},t._l(t.tours,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:t.$t("Event time"),error:t.form.formatErrors("tour_option_id")}},[r("el-time-select",{staticStyle:{width:"100%"},attrs:{"picker-options":{start:"08:30",step:"00:15",end:"22:30"},placeholder:"Select time"},model:{value:t.form.data.start_at,callback:function(e){t.$set(t.form.data,"start_at",e)},expression:"form.data.start_at"}})],1)],1)],1)]:[r("el-form-item",{attrs:{label:t.$t("Tour"),error:t.form.formatErrors("tour_id"),required:""}},[r("el-select",{attrs:{placeholder:t.$t("Tour")},on:{change:t.onChangeTour},model:{value:t.form.data.tour_id,callback:function(e){t.$set(t.form.data,"tour_id",e)},expression:"form.data.tour_id"}},t._l(t.tours,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],t._v(" "),r("el-form-item",{attrs:{label:t.$t("Options"),error:t.form.formatErrors("options_list")}},[t.form.data.options_list?r("el-checkbox-group",{model:{value:t.form.data.options_list,callback:function(e){t.$set(t.form.data,"options_list",e)},expression:"form.data.options_list"}},t._l(t.options,(function(e){return r("div",{key:e.id,staticClass:"mb-20"},[r("el-checkbox",{attrs:{label:e.id},model:{value:t.form.data.options_list,callback:function(e){t.$set(t.form.data,"options_list",e)},expression:"form.data.options_list"}},[t._v(t._s(e.name))])],1)})),0):t._e()],1),t._v(" "),r("v-divider"),t._v(" "),r("el-form-item",{attrs:{label:t.$t("First name"),error:t.form.formatErrors("first_name"),required:""}},[r("el-input",{model:{value:t.form.data.first_name,callback:function(e){t.$set(t.form.data,"first_name",e)},expression:"form.data.first_name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("Last name"),error:t.form.formatErrors("last_name"),required:""}},[r("el-input",{model:{value:t.form.data.last_name,callback:function(e){t.$set(t.form.data,"last_name",e)},expression:"form.data.last_name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("Phone"),error:t.form.formatErrors("phone"),required:""}},[r("el-input",{model:{value:t.form.data.phone,callback:function(e){t.$set(t.form.data,"phone",e)},expression:"form.data.phone"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("Email"),error:t.form.formatErrors("email")}},[r("el-input",{model:{value:t.form.data.email,callback:function(e){t.$set(t.form.data,"email",e)},expression:"form.data.email"}})],1),t._v(" "),r("v-divider"),t._v(" "),r("el-form-item",{attrs:{label:t.$t("Tickets"),error:t.form.formatErrors("options_list")}},t._l(t.form.data.tickets_list,(function(e){return r("el-row",{key:e.id,staticClass:"mb-20",staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20,type:"flex",align:"middle"}},[r("el-col",{attrs:{span:8}},[t._v(t._s(e.name))]),t._v(" "),r("el-col",{attrs:{span:16}},[r("el-input-number",{attrs:{label:e.name,size:"small",min:0,max:t.getMaxQuantity(e)},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"ticket.quantity"}})],1)],1)})),1),t._v(" "),t.createMode?t._e():r("v-form-preview",{attrs:{label:t.$t("Total price")}},[r("b",[t._v(t._s(t.form.data.total_price)+" "+t._s(t.form.data.tour.currency))])]),t._v(" "),r("v-form-preview",{attrs:{label:t.$t("New price")}},[r("b",[t._v(t._s(t.calculatePrice(t.form.data,t.tickets))+" "+t._s(t.form.data.tour.currency))])]),t._v(" "),r("v-divider"),t._v(" "),r("el-form-item",{attrs:{error:t.form.formatErrors("comment")}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"Insert comment"},model:{value:t.form.data.comment,callback:function(e){t.$set(t.form.data,"comment",e)},expression:"form.data.comment"}})],1),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);e.a=i.exports}}]);